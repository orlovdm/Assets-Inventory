@model Assets_Inventory.Models.Asset

@{
    ViewBag.Title = "Asset Inventory";
}

<div id="modalDialod" class="modal fade" role="dialog" aria-labelledby="AssetLabel">
    <div id="dialogContent" class="modal-dialog modal" role="document"></div>
</div>

<div class="row">
    <h2 class="page-header">Active Assets</h2>
    <table class="table table-hover">
        <tr>
            <th>Инв. №</th>
            <th>Марка</th>
            <th>Модель</th>
            <th>Имя в сети</th>
            <th>Расположение</th>
            <th>&nbsp;</th>
        </tr>
        @foreach (Assets_Inventory.Models.Asset item in ViewBag.Assets)
        {
            <tr>
                <td>@Html.DisplayFor(m => item.Inv_id)</td>
                <td>@Html.DisplayFor(m => item.Brand)</td>
                <td>@Html.DisplayFor(m => item.Model)</td>
                <td>@Html.DisplayFor(m => item.Netw_name)</td>
                <td>@Html.DisplayFor(m => item.Location)</td>
                <td>
                    <div class="btn-toolbar">
                        <div class="btn-group">
                            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#AddLocation" data-whatever="@Html.DisplayFor(m => item.Id)">
                                <span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
                            </button>
                            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#AddConnection" data-whatever="@Html.DisplayFor(m => item.Id)">
                                <span class="glyphicon glyphicon-link" aria-hidden="true"></span>
                            </button>
                        </div>

                        <div class="btn-group">
                            @Html.ActionLink("<span class=\"glyphicon glyphicon-edit\" aria-hidden=\"true\"></span>", "Edit", new { id = item.Id }, new { @class = "btn btn-success" })
                            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#DeleteAsset" data-whatever="@Html.DisplayFor(m => item.Id)">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                </td>
            </tr>
        }
    </table>
    <p>@Html.ActionLink("Добавить", "Create", null, new { @class = "btn btn-primary", id = "Create" })</p>
</div>

@section scripts 
{
    <script>
        $(function () {
            $.ajaxSetup({ cache: false });
            $(".btn").click(function (e) {
                e.preventDefault();

                $('#dialogContent').load(this.href, function () {
                    $('modalDialog').modal({
                        keyboard: true
                    }, 'show');
                });

                //$.get(this.href, function (data) {
                //    $("#dialogContent").html(data);
                //    $("#modalDialog").modal('show');
                //});
            });
        });
    </script>
}
